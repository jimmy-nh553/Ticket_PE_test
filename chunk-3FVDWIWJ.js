import{a as me,b as ae,c as re,d as le,e as se,f as de}from"./chunk-5WBRXMTE.js";import{a as $,b as ee,c as te,d as ie,e as ne}from"./chunk-N37AEC6R.js";import"./chunk-7ISU4VHZ.js";import{a as oe}from"./chunk-U7BT5TPS.js";import"./chunk-L4T4O7BY.js";import"./chunk-CNDIVVUN.js";import{l as Z}from"./chunk-MDFODGFC.js";import{c as P}from"./chunk-YXGW5C3D.js";import"./chunk-45ZPYATT.js";import{a as Y,b as N}from"./chunk-2XU7JKIX.js";import{b as J,d as K,g as Q,j as X}from"./chunk-X5WX7QWY.js";import"./chunk-RPLDP4LT.js";import"./chunk-VCLJSZIP.js";import{f as G,g as x}from"./chunk-HEYRUS75.js";import"./chunk-X2Y62DJS.js";import"./chunk-JBR4PRVN.js";import"./chunk-WPZQ3JMC.js";import"./chunk-NLBVP2SK.js";import{$ as z,U as S}from"./chunk-XDDGYLIL.js";import"./chunk-4YRY4IP2.js";import{k as U,t as q,u as M}from"./chunk-VDAMAAAC.js";import{$a as i,Aa as v,Ab as g,Bb as k,Cb as w,Db as I,Eb as R,Mb as H,Oa as A,Ob as j,Pb as T,Ra as s,Ua as B,W as _,ab as n,bb as y,ca as L,da as h,ea as C,fb as O,j as V,jb as f,ka as W,t as D,ub as r,v as F,wb as b,yb as c,za as l,zb as u}from"./chunk-K5RBF46N.js";import"./chunk-4CLCTAJ7.js";var be=()=>({width:"50rem"}),he=()=>({"1199px":"75vw","575px":"90vw"}),Ce=m=>({"bg-slate-400 hover:bg-slate-400":m}),E=class m{constructor(t){this.confirmationService=t}_visible=!1;get visible(){return this._visible}visibleChange=new W;set visible(t){this._visible=t,this.visibleChange.emit(t)}title="";mode="create";item={itemNo:"",itemName:"",imageUrl:"",itemPrice:0};ngOnInit(){this.setTitle()}ngOnChanges(t){t.mode&&this.setTitle()}setTitle(){if(this.mode==="create"){this.title="Crear item";return}this.title=`Item ${this.item.itemName}`}toggleVisibility(){this.visible=!this.visible,this.clearInputs()}dataIsInvalid(){return this.item.itemName.trim().length===0||this.item.itemPrice<=0}saveItem(){this.toggleVisibility()}clearInputs(){this.item={itemNo:"",itemName:"",imageUrl:"",itemPrice:0}}createConfirm(t){this.confirmationService.confirm({target:t.target,message:`\xBFEst\xE1 seguro que desea crear el item ${this.item.itemName}?`,header:"Confirmaci\xF3n",closable:!0,closeOnEscape:!0,icon:"pi pi-exclamation-triangle",rejectButtonProps:{label:"Cancelar",severity:"secondary",outlined:!0},acceptButtonProps:{label:"Crear"},accept:()=>{this.saveItem()},reject:()=>{}})}static \u0275fac=function(a){return new(a||m)(v(S))};static \u0275cmp=_({type:m,selectors:[["admin-modal-item"]],inputs:{visible:"visible",mode:"mode",item:"item"},outputs:{visibleChange:"visibleChange"},standalone:!0,features:[k([S]),L,w],decls:14,vars:17,consts:[[3,"visibleChange","onHide","header","modal","visible","breakpoints"],[1,"grid","grid-cols-12","gap-4","mt-4"],[1,"flex","flex-col","col-span-12","md:col-span-6"],["for","txtItemName",1,"text-sm","text-slate-500","font-medium","mb-2"],["type","text","id","txtItemName","pInputText","",3,"ngModelChange","ngModel"],["for","txtName",1,"text-sm","text-slate-500","font-medium","mb-2"],["inputId","txtItemPrice","mode","decimal",3,"ngModelChange","ngModel","minFractionDigits","maxFractionDigits"],[1,"text-center","my-4"],[1,"rounded-xl","font-semibold","shadow-lg","bg-red-500","text-white","px-4","py-1","transition","duration-300","ease-in-out","hover:bg-red-600",3,"click","disabled","ngClass"]],template:function(a,e){a&1&&(i(0,"p-dialog",0),g("visibleChange",function(o){return u(e.visible,o)||(e.visible=o),o}),f("onHide",function(){return e.clearInputs()}),i(1,"div",1)(2,"div",2)(3,"label",3),r(4,"Nombre:"),n(),i(5,"input",4),g("ngModelChange",function(o){return u(e.item.itemName,o)||(e.item.itemName=o),o}),n()(),i(6,"div",2)(7,"label",5),r(8,"Costo:"),n(),i(9,"p-inputnumber",6),g("ngModelChange",function(o){return u(e.item.itemPrice,o)||(e.item.itemPrice=o),o}),n()()(),i(10,"div",7)(11,"button",8),f("click",function(o){return e.createConfirm(o)}),r(12),n()()(),y(13,"p-confirmdialog")),a&2&&(B(I(13,be)),s("header",e.title)("modal",!0),c("visible",e.visible),s("breakpoints",I(14,he)),l(5),c("ngModel",e.item.itemName),l(4),c("ngModel",e.item.itemPrice),s("minFractionDigits",2)("maxFractionDigits",2),l(2),s("disabled",e.dataIsInvalid())("ngClass",R(15,Ce,e.dataIsInvalid())),l(),b(" ",e.mode==="edit"?"Guardar":"Crear item"," "))},dependencies:[M,U,X,J,K,Q,x,P,N,Y,Z,re,ae,ee,$,se,le]})};var Ie=()=>({"min-width":"45rem"});function _e(m,t){m&1&&(i(0,"tr")(1,"th",11),r(2," N\xB0 Item "),n(),i(3,"th",11),r(4," Item "),n(),i(5,"th",12),r(6," Costo Item "),n()())}function ve(m,t){if(m&1&&(i(0,"tr",13)(1,"td",14),r(2),n(),i(3,"td",14),r(4),n(),i(5,"td",14),r(6),H(7,"currency"),n()()),m&2){let a=t.$implicit;s("pSelectableRow",a),l(2),b(" ",a.itemNo," "),l(2),b(" ",a.itemName," "),l(2),b(" ",j(7,4,a.itemPrice,"S/ ")," ")}}function ye(m,t){m&1&&(i(0,"tr")(1,"td",15),r(2,"No se encontraron registros."),n()())}var pe=class m{constructor(t){this._itemsService=t}modalVisible=!1;modalMode="create";selectedItem={itemNo:"",itemName:"",imageUrl:"",itemPrice:0};items=[];ngOnInit(){this.getData()}getData(){D({items:this._itemsService.getAll().pipe(F(()=>V(null)))}).subscribe(t=>{this.items=t.items||[]},t=>{console.error("Error loading data",t)})}newItem(){this.selectedItem={itemNo:"",itemName:"",imageUrl:"",itemPrice:0},this.modalMode="create",this.toggleVisibility()}toggleVisibility(){this.modalVisible=!this.modalVisible}showModal(){this.modalMode="edit",this.toggleVisibility()}static \u0275fac=function(a){return new(a||m)(v(de))};static \u0275cmp=_({type:m,selectors:[["app-admin-items-list-page"]],standalone:!0,features:[w],decls:15,vars:9,consts:[["header",""],["body",""],[1,"mx-auto","max-w-[1500px]"],[1,"mx-8"],[1,"my-3","flex","justify-between"],[1,"uppercase","font-bold","text-xl"],["label","Nuevo","size","small","severity","info",3,"onClick"],[1,""],["styleClass","text-sm","selectionMode","single","dataKey","itemNo",3,"selectionChange","onRowSelect","value","tableStyle","selection","scrollable","scrollHeight"],["pTemplate","emptymessage"],[3,"visibleChange","visible","item","mode"],[1,"px-1","md:px-3","bg-slate-200",2,"width","10%"],[1,"bg-slate-200",2,"width","15%"],[3,"pSelectableRow"],[1,"px-1","md:px-3"],["colspan","3",1,"text-center"]],template:function(a,e){if(a&1){let d=O();y(0,"admin-header"),i(1,"section",2)(2,"div",3)(3,"div",4)(4,"h1",5),r(5,"Items"),n(),i(6,"p-button",6),f("onClick",function(){return h(d),C(e.newItem())}),n()(),i(7,"div",7)(8,"p-table",8),g("selectionChange",function(p){return h(d),u(e.selectedItem,p)||(e.selectedItem=p),C(p)}),f("onRowSelect",function(){return h(d),C(e.showModal())}),A(9,_e,7,0,"ng-template",null,0,T)(11,ve,8,7,"ng-template",null,1,T)(13,ye,3,0,"ng-template",9),n()()()(),i(14,"admin-modal-item",10),g("visibleChange",function(p){return h(d),u(e.modalVisible,p)||(e.modalVisible=p),C(p)}),n()}a&2&&(l(8),s("value",e.items)("tableStyle",I(8,Ie)),c("selection",e.selectedItem),s("scrollable",!0)("scrollHeight","flex"),l(6),c("visible",e.modalVisible),s("item",e.selectedItem)("mode",e.modalMode))},dependencies:[M,q,oe,ne,te,z,ie,x,G,P,N,me,E]})};export{pe as AdminItemsListPageComponent};
